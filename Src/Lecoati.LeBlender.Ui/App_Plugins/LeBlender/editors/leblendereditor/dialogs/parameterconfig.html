<div class="list-panel" ng-controller="LeBlender.Dialog.Parameterconfig.Controller as vm">

    <umb-editor-view>

		<umb-editor-header
            name="name"
			icon="icon"
			name-locked="true"
			hide-alias="true"
            hide-icon="true"
			hide-description="true">
		</umb-editor-header>

        <umb-editor-container class="form-horizontal" id="blender-grid-editor-parameter">

            <div ng-if="configLoaded" ui-sortable="sortableOptions" ng-model="model.value">

                <div class="umb-expansion-panel" ng-class="{'multiple':!(fixed && config.min == 1)}" ng-repeat="item in model.value track by $index">

                    <div class="umb-expansion-panel__header" ng-show="!(fixed && config.min == 1)" ng-click="vm.select(item, $index)">
                        <div class="flex-auto">
                            <span ng-show="!(fixed && config.min == 1)" class="list-number">
                                {{$index + 1}}
                            </span>
                        </div>
                        <i ng-show="model.value.length > 1" class="icon icon-navigation handle" style="margin-right: 5px;"></i>
                        <i ng-show="!fixed && model.value.length > config.min" ng-click="vm.showPrompt(item); $event.stopPropagation();" class="icon icon-delete" style="margin-right: 5px;"></i>
                        <ins class="umb-expansion-panel__expand" ng-show="!fixed && config.max > model.value.length" ng-class="{'icon-navigation-down': !item.propertiesOpen, 'icon-navigation-up': item.propertiesOpen}">&nbsp;</ins>
                        
                        <umb-confirm-action ng-if="item.deletePrompt"
                                            on-confirm="vm.remove(item)"
                                            on-cancel="vm.hidePrompt(item)">
                        </umb-confirm-action>
                    </div>

                    <div class="umb-expansion-panel__content" ng-show="item.propertiesOpen || (fixed && config.min == 1)">

                        <div>
                            <umb-control-group label="{{property.$editor.name}}" description="{{property.$editor.description}}"
                                               ng-repeat="property in item | LeBlenderOrderObjectBy:'$order':false">
                                <blender-editor-wrapper property="property" item="item"></blender-editor-wrapper>
                            </umb-control-group>
                        </div>

                    </div>

                </div>

            </div>

            <div ng-show="!fixed && config.max > model.value.length" ng-click="vm.add()" class="list-add-row">
                <localize key="grid_addElement">Add element</localize>
            </div>

        </umb-editor-container>

		<umb-editor-footer>
			<umb-editor-footer-content-right>
				<umb-button type="button"
							button-style="link"
							label-key="general_close"
							shortcut="esc"
							action="vm.close()">
				</umb-button>
				<umb-button type="button"
							button-style="success"
							label-key="general_submit"
							state="vm.saveButtonState"
							action="vm.submit(model)">
				    </umb-button>
			</umb-editor-footer-content-right>
		</umb-editor-footer>

    </umb-editor-view>
</div>